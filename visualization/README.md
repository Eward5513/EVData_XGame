# åœ°ç†æ•°æ®å¯è§†åŒ–å¹³å°

ä¸€ä¸ªåŸºäºCesiumçš„åœ°ç†æ•°æ®å¯è§†åŒ–ç³»ç»Ÿï¼Œæ”¯æŒè½¦è¾†è½¨è¿¹æ•°æ®çš„å®æ—¶å¯è§†åŒ–å±•ç¤ºã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ¨ åŸºäºCesiumçš„3Dåœ°ç†å¯è§†åŒ–
- ğŸš— è½¦è¾†è½¨è¿¹æ•°æ®å±•ç¤º
- ğŸ¨ æ ¹æ®é€Ÿåº¦è¿›è¡Œé¢œè‰²ç¼–ç 
- ğŸ“Š å®æ—¶æ•°æ®ç»Ÿè®¡ä¿¡æ¯
- ğŸ”„ å‰åç«¯åˆ†ç¦»æ¶æ„
- ğŸ“± å“åº”å¼ç•Œé¢è®¾è®¡

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Cesium 1.127** - 3Dåœ°ç†å¯è§†åŒ–æ¡†æ¶
- **HTML5 + CSS3** - ç°ä»£Webç•Œé¢
- **JavaScript ES6+** - äº¤äº’é€»è¾‘

### åç«¯
- **Python 3.7+** - åç«¯æœåŠ¡
- **Flask** - Webæ¡†æ¶
- **Pandas** - æ•°æ®å¤„ç†
- **Flask-CORS** - è·¨åŸŸæ”¯æŒ

## å¿«é€Ÿå¼€å§‹

### 1. åç«¯æœåŠ¡å¯åŠ¨

é¦–å…ˆå®‰è£…Pythonä¾èµ–ï¼š

```bash
cd visualization/backend
pip install -r requirements.txt
```

å¯åŠ¨åç«¯æœåŠ¡ï¼š

```bash
python server.py
```

æœåŠ¡å°†åœ¨ `http://127.0.0.1:5555` å¯åŠ¨

### 2. å‰ç«¯é¡µé¢è®¿é—®

ä½¿ç”¨WebæœåŠ¡å™¨æ‰“å¼€å‰ç«¯é¡µé¢ï¼ˆä¸èƒ½ç›´æ¥åŒå‡»HTMLæ–‡ä»¶ï¼Œéœ€è¦é€šè¿‡HTTPæœåŠ¡è®¿é—®ï¼‰ï¼š

```bash
# æ–¹æ³•1: ä½¿ç”¨Pythonå†…ç½®æœåŠ¡å™¨
cd visualization/frontend
python -m http.server 8080

# æ–¹æ³•2: ä½¿ç”¨Node.js http-server
npm install -g http-server
cd visualization/frontend
http-server -p 8080

# æ–¹æ³•3: ä½¿ç”¨Live Server (VS Codeæ‰©å±•)
# åœ¨VS Codeä¸­å®‰è£…Live Serveræ‰©å±•ï¼Œå³é”®HTMLæ–‡ä»¶é€‰æ‹©"Open with Live Server"
```

ç„¶åè®¿é—®: `http://localhost:8080/html/index.html`

## APIæ¥å£æ–‡æ¡£

### è·å–è½¦è¾†æ•°æ®
```
GET /api/vehicle/data?vehicle_id=1&limit=1000
```

**å‚æ•°:**
- `vehicle_id`: è½¦è¾†ID (é»˜è®¤: 1)
- `limit`: æ•°æ®ç‚¹é™åˆ¶ (å¯é€‰)

**å“åº”:**
```json
{
    "status": "success",
    "vehicle_id": 1,
    "total_points": 23479,
    "data": [
        {
            "vehicle_id": 1,
            "collectiontime": 1718787136000,
            "time_stamp": "08:52:16",
            "road_id": "A0003",
            "longitude": 123.146328,
            "latitude": 32.344848,
            "speed": 48.2,
            "acceleratorpedal": 13,
            "brakestatus": 0
        }
    ]
}
```

### è·å–æ•°æ®æ‘˜è¦
```
GET /api/vehicle/summary?vehicle_id=1
```

**å“åº”:**
```json
{
    "status": "success",
    "vehicle_id": 1,
    "total_points": 23479,
    "time_range": {
        "start": "08:52:16",
        "end": "17:03:26"
    },
    "coordinate_bounds": {
        "longitude_min": 123.146328,
        "longitude_max": 123.151635,
        "latitude_min": 32.344848,
        "latitude_max": 32.345088
    },
    "speed_stats": {
        "min": 0.0,
        "max": 60.5,
        "avg": 25.3
    }
}
```

## ä½¿ç”¨æŒ‡å—

1. **å¯åŠ¨æœåŠ¡**: ç¡®ä¿åç«¯æœåŠ¡åœ¨5555ç«¯å£è¿è¡Œ
2. **æ‰“å¼€é¡µé¢**: é€šè¿‡HTTPæœåŠ¡å™¨è®¿é—®å‰ç«¯é¡µé¢
3. **é€‰æ‹©å‚æ•°**: åœ¨æ§åˆ¶é¢æ¿ä¸­é€‰æ‹©è½¦è¾†IDå’Œæ•°æ®ç‚¹æ•°é‡
4. **åŠ è½½æ•°æ®**: ç‚¹å‡»"åŠ è½½æ•°æ®"æŒ‰é’®è·å–å¹¶æ˜¾ç¤ºè½¨è¿¹
5. **æŸ¥çœ‹è¯¦æƒ…**: ç‚¹å‡»åœ°å›¾ä¸Šçš„ç‚¹æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
6. **æ¸…é™¤æ•°æ®**: ç‚¹å‡»"æ¸…é™¤æ•°æ®"æŒ‰é’®æ¸…ç©ºåœ°å›¾

## é€Ÿåº¦é¢œè‰²ç¼–ç 

- ğŸŸ¢ **ç»¿è‰²**: 0-10 km/h (æ…¢é€Ÿ)
- ğŸŸ¡ **é»„è‰²**: 10-30 km/h (ä¸­é€Ÿ)
- ğŸŸ  **æ©™è‰²**: 30-50 km/h (å¿«é€Ÿ)
- ğŸ”´ **çº¢è‰²**: 50+ km/h (é«˜é€Ÿ)

## ç›®å½•ç»“æ„

```
visualization/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ server.py           # FlaskæœåŠ¡å™¨
â”‚   â””â”€â”€ requirements.txt    # Pythonä¾èµ–
â”œâ”€â”€ frontend/               # å‰ç«¯æ–‡ä»¶
â”‚   â”œâ”€â”€ html/
â”‚   â”‚   â””â”€â”€ index.html     # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ app.js         # åº”ç”¨é€»è¾‘
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css      # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ Cesium-1.127/      # Cesiumæ¡†æ¶
â””â”€â”€ README.md              # è¯´æ˜æ–‡æ¡£
```

## æ•°æ®æ ¼å¼è¦æ±‚

CSVæ–‡ä»¶éœ€è¦åŒ…å«ä»¥ä¸‹å­—æ®µï¼š
- `vehicle_id`: è½¦è¾†ID
- `collectiontime`: æ”¶é›†æ—¶é—´æˆ³(æ¯«ç§’)
- `time_stamp`: æ—¶é—´å­—ç¬¦ä¸²
- `road_id`: é“è·¯ID
- `longitude`: ç»åº¦
- `latitude`: çº¬åº¦
- `speed`: é€Ÿåº¦(km/h)
- `acceleratorpedal`: æ²¹é—¨è¸æ¿(%)
- `brakestatus`: åˆ¹è½¦çŠ¶æ€(0/1)

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **é¡µé¢ç©ºç™½**: ç¡®ä¿é€šè¿‡HTTPæœåŠ¡å™¨è®¿é—®ï¼Œä¸è¦ç›´æ¥æ‰“å¼€HTMLæ–‡ä»¶
2. **æ•°æ®åŠ è½½å¤±è´¥**: æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œåœ¨5555ç«¯å£
3. **è·¨åŸŸé”™è¯¯**: ç¡®ä¿åç«¯å·²å¯ç”¨CORSæ”¯æŒ
4. **CesiumåŠ è½½å¤±è´¥**: æ£€æŸ¥Cesiumæ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®

### è°ƒè¯•æ–¹æ³•

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯
2. æ£€æŸ¥Networké€‰é¡¹å¡æŸ¥çœ‹APIè¯·æ±‚çŠ¶æ€
3. ç¡®è®¤åç«¯æœåŠ¡æ—¥å¿—è¾“å‡º
4. éªŒè¯CSVæ–‡ä»¶è·¯å¾„å’Œæ ¼å¼

## æ‰©å±•åŠŸèƒ½

### å¯æ·»åŠ çš„åŠŸèƒ½
- æ—¶é—´è½´æ’­æ”¾
- å¤šè½¦è¾†å¯¹æ¯”
- è·¯å†µçƒ­åŠ›å›¾
- å®æ—¶æ•°æ®æµ
- æ•°æ®å¯¼å‡ºåŠŸèƒ½
- è·¯å¾„è§„åˆ’

### æ€§èƒ½ä¼˜åŒ–
- æ•°æ®åˆ†é¡µåŠ è½½
- ç‚¹èšåˆæ˜¾ç¤º
- ç“¦ç‰‡ç¼“å­˜
- åç«¯æ•°æ®ç¼“å­˜

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

## è”ç³»æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡Issueåé¦ˆã€‚
